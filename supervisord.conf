[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[program:vllm]
command=/app/start_vllm.sh
directory=/app
autostart=true
autorestart=true
startretries=3
startsecs=30
stdout_logfile=/var/log/supervisor/vllm.log
stderr_logfile=/var/log/supervisor/vllm_err.log
priority=10

[program:web]
command=python3 app.py
directory=/app
environment=VLLM_API_URL="http://127.0.0.1:9999/v1/chat/completions",MODEL_NAME="Step-Audio-R1.1",PORT="9100"
autostart=true
autorestart=true
startretries=3
startsecs=10
stdout_logfile=/var/log/supervisor/web.log
stderr_logfile=/var/log/supervisor/web_err.log
priority=20
